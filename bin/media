#!/bin/bash

reset="\e[0m"
bold="\e[1m"
red="\e[31m"

function media_error {
    printf "${bold}${red}*** ${*}${reset}\n"
    exit 1
}


function media_lookup_atom {
    local file="$1"
    local atom="$2"

    # the perl invocation removes a unicode byte order mark character, which
    # is probably useful, but makes it really hard to grep things consistently
    AtomicParsley "$file" -t                \
        | perl -ne 's/^[^A]+//m; print;'    \
        | grep "Atom .${atom}."             \
        | cut -c23-
}
